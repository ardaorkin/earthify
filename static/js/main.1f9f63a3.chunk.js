(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],[,,function(e,t,n){e.exports=n.p+"static/media/earthmusic.21749bcf.png"},,,,function(e,t,n){e.exports=n.p+"static/media/magnifier.5792a2ef.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRMJNRULcJnnAAAA4ElEQVQoz3WQPU4CYRRFzzchAQ1jIzMh9EwFLmPWIDWNPSvQgGuw1sKwCBUTamozCYk/BYl0E62PhUJEmdfde0/ue3kAgA3bBn7GYNsGW5l4Y2nhuxPr1r10bWHptS2IPOKBZ9KQkZEyZUpCN2SkvDAzDk44Dmebam4hnG67r1hjYZeKMfMJS6NKILKM+OSgCuCQj4h7BpXAgDs8cWVr74LElT3AkXOb/+Kmc0cbMXZmvBPHPjr+bVy4sLNVHRee/60curQPYM+lw31H5b6Zm/tqXvWYvoXFd08VUrO263wBW0B2PHcqYjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDUtMTlUMDk6NTM6MjErMDA6MDCRbD+1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA1LTE5VDA5OjUzOjIxKzAwOjAw4DGHCQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAe1BMVEUAAAAAvyALtSsA/wAAtiQGuSkGuCgGuCgGuCgAtiQGuSgGuCcAsyYAtiQGuCkGuCkAsScGuSkGuCgGuCgGuCgGuCgFuCgGuCgGuCgGtycGuCgGuSkHuCgGtygGuCcGtygFtygGuCgFuCcHuigGtSgGuCgAv0AGuCgAAAAFJgTAAAAAJ3RSTlMACBgBFaP38YUHhqIUDtawDYPa2Pn46eelLvosc4uCgGD7aEYt3gSfgp28AAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+QFEwk1MTdzfTYAAAB2SURBVBjTVY5JFoJADAULEBpQQRxQEQfG3P+G2v1QO7VI8muR9wGCMPpMojCwi1WciEmzLDeSrDewLcRSlm4VO1JRVOy1OHDU4kStxZmLFjHXxs/NDVpftLZZ9c93V5XHNz9ZeLk/Xc+PwYiYAY9xmkYU87wcb8OwF/sJ6jgsAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA1LTE5VDA5OjUzOjQ5KzAwOjAwZOx4VQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNS0xOVQwOTo1Mzo0OSswMDowMBWxwOkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBREOKg+UDrANAAAA/UlEQVQoz5WRQStEURiGn/c2xhQr29mosRELK4WtGfkH6mayIGXBgmQnS8qCheUkC9MkP0A3S6yUhQWFP6CsKE2a1+a6TnMX8q7e73zP+c7bd+A/8rTLmZ93D0AUtGOajGRlm5ZLAeBlZtlP/bilFmfsZIA3GaPOV0pP0LDUZNDDke+dOKGfFXV+pumARxaBQxbwRZBiwzUPeQtc9CVYToKQ6e0nJj2gNh8uyXRyQLdygCtc6c1F+vRpERUoOwFu2JYB9MwusM4pMMVtpFFVVeWdI//uZI0KDWCV4/RQe9xxQiElrlmSHfOih/D12K+uZdWcz93bHXAm/1l/6hud81xqUNTrKwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNS0xN1QxNDo0MjoxNSswMDowMD9B3xgAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDUtMTdUMTQ6NDI6MTUrMDA6MDBOHGekAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRMINChLwY6AAAAAb0lEQVQoz53RsREBYRQE4OcSiUAg8ccqOAXoRguUoAUzutCGVAcXMYxAJPlUcGvGxl/w3m5p7k6WNRZr8HYwSwAGW10CcLHJAM5WGfBxtEgAHnamCcDVvKsfGQfP2lc/ef11ZHwzFhWrDmM1tzT3F2157ZhiC6zwAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIwLTA1LTE5VDA4OjUyOjQwKzAwOjAwwyCPPQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMC0wNS0xOVQwODo1Mjo0MCswMDowMLJ9N4EAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRMINSfCZaJQAAAAMUlEQVQoz2NgYPh/+D8MHGJgQOczMTAwiDPAgAQDAzqfiYEAGFUwuBS8gPOeMzCg8wHuHhsRKYTAWQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNS0xOVQwODo1MzozOSswMDowMLO/qMkAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDUtMTlUMDg6NTM6MzkrMDA6MDDC4hB1AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRMIGQkngsQxAAAAgElEQVQoz73QKw6DUBCF4QOpwoDtSupJUxSKyu7mrqA4fG0FXQCeZRBw7IG/gvK4kBAMHffljDgz0j+HBxXJzGfelAMCXgCYMb7TAvSIaGBawCf7GeHxpBuIkbhSj+akQherSaxczmR31dWx6SpUKmb5Rzc1ywO3Su46c8ejjpwv/Y99Yg1drDcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDUtMTlUMDg6MjU6MDkrMDA6MDAZFcruAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA1LTE5VDA4OjI1OjA5KzAwOjAwaEhyUgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBRMIGA059DFpAAAAcElEQVQoz7XQIRaCUBAF0I/dBMUNWTySjOzGnUjjaHIRHt2FSUjsgGt0fkAS02bmhnmT0vrl5WYX+pO3JgIYfyNncFVFAJ0yAHp1Dvg4BAAX2wiYHDPAY7MUIoI+1cU927ZpP3/kEI/8G/O58Kj16wtVeJiaRNAcfQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNS0xOVQwODoyNDoxMyswMDowMJ4N/gAAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDUtMTlUMDg6MjQ6MTMrMDA6MDDvUEa8AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},,,,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkBREONyogZghWAAAA3ElEQVQoz32QsU4CQRRFz5tMYUJJkMLKTpCWztLKwm61sDEhaE8MHwKBZu3VpXJjBfEL/ADpKQklISHBS4HBXRg5yWvuve/mzUAOHelFV1nF5ewiCVMKWc1n7FP6tKjlO7cNqtPl3r7ZwavKOVDmglubs4ejB8CEuz9bVV0DyKntmdpgb21MSwXeiBk5AtgPD1zyycheg4FNajM+5MkRMyQhFp6SImDJh622iTPeLQU1eTJVqP0+s2FzUASBs0F1DXUCihQFf9K+eORZFQ6holJ1/mkAsBk3HLPIamtU0kMwHOlC+AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNS0xN1QxNDo1NTo0MiswMDowMJFUK0sAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDUtMTdUMTQ6NTU6NDIrMDA6MDDgCZP3AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},,function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),c=n(5),r=n.n(c),s=(n(23),n(1)),i=(n(24),n(25),n(2)),A=n.n(i),l=n(6),u=n.n(l),p=n(7),m=n.n(p),g=n(8),h=n.n(g),d=n(9),f=n.n(d),y=(n(26),n(10)),w=n.n(y),k=n(11),_=n.n(k),S=n(12),E=n.n(S),C=n(13),v=n.n(C),j="9e71a4da3ee24d31ab4fd842607cce9e",b="026466614b7649c8bee9e469627fe61c",B=window.location.origin+window.location.pathname,N=n(14),Q=n(15),U=n(3),I=n(16),O=n(17),M=function(e){Object(O.a)(n,e);var t=Object(I.a)(n);function n(e){var o;return Object(N.a)(this,n),(o=t.call(this,e)).handlePlaySong=function(e){fetch("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({context_uri:JSON.parse(localStorage.getItem("listed_playlist")).uri,offset:{uri:e}})}).then((function(e){return e})).then((function(e){console.log("song_playing: ",e),404===e.status&&alert("Please open Spotify App in your device")})).then((function(){return o.setState({_isPlaying:!0})}))},o.state={playlist:null,_isPlaying:!1},o.handlePlaySong=o.handlePlaySong.bind(Object(U.a)(o)),o}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.spotify.com/v1/playlists/".concat(this.props.playlist_id,"/tracks"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return e.json()})).then((function(t){void 0!==t.error&&401===t.error.status&&fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic OWU3MWE0ZGEzZWUyNGQzMWFiNGZkODQyNjA3Y2NlOWU6OTA3ZTQzMmNkM2Q3NDU1NGIyOTU4MmViNTg3NTYyNzc=","Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=refresh_token&refresh_token=".concat(localStorage.getItem("refresh_token"))}).then((function(e){return e.json()})).then((function(e){console.log("updating access token..."),localStorage.setItem("access_token",e.access_token)})).then((function(){return console.log("acess token were refresh\nnew access token: ",localStorage.getItem("access_token"))})).then((function(){return window.location.reload()})),e.setState({playlist:t})}))}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,null!=this.state.playlist&&this.state.playlist.items.length>0?this.state.playlist.items.map((function(t){var n=[];return a.a.createElement("li",{key:t.track.id,onClick:function(){return e.handlePlaySong(t.track.uri)},className:"songs-list"},t.track.name," - ",t.track.artists.map((function(e){return n.push(e.name),n.join(", ")})))})):null)}}]),n}(a.a.Component);var G=function(e){var t=localStorage.getItem("map_style")||"light",o=localStorage.getItem("access_token")||"",c=localStorage.getItem("show_currently_playing")||!1,r=a.a.useState(o),i=Object(s.a)(r,2),l=i[0],p=i[1],g=a.a.useState(window.localStorage.getItem("auth")),d=Object(s.a)(g,2),y=d[0],k=(d[1],a.a.useState(localStorage.getItem("refresh_token"))),S=Object(s.a)(k,2),C=S[0],N=S[1],Q=a.a.useState(),U=Object(s.a)(Q,2),I=U[0],O=U[1],G=a.a.useState(),T=Object(s.a)(G,2),D=T[0],R=T[1],J=a.a.useState(t),x=Object(s.a)(J,2),P=x[0],F=x[1],Z=a.a.useState(),z=Object(s.a)(Z,2),V=z[0],Y=z[1],L=a.a.useState(!0),W=Object(s.a)(L,2),H=W[0],K=W[1],X=a.a.useState(),q=Object(s.a)(X,2),$=q[0],ee=q[1],te=a.a.useState(null),ne=Object(s.a)(te,2),oe=ne[0],ae=ne[1],ce=a.a.useState({}),re=Object(s.a)(ce,2),se=re[0],ie=re[1],Ae=a.a.useState(JSON.parse(c)),le=Object(s.a)(Ae,2),ue=le[0],pe=le[1],me=a.a.useState({}),ge=Object(s.a)(me,2),he=ge[0],de=ge[1],fe=a.a.useState(!1),ye=Object(s.a)(fe,2),we=ye[0],ke=ye[1],_e=[],Se=n(27);Se.accessToken="pk.eyJ1IjoiYXJkYW9ya2luIiwiYSI6ImNrOW9teW8wMzAyNnczbHJ0emVvNHE5dXcifQ.J_P9VwfH6UeYpgG5gw-JJQ",null!==window.location.search.match(/\?code/g)&&fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=authorization_code&code=".concat(window.location.search.split("=")[1],"&redirect_uri=").concat(B,"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("create_access_token_result",JSON.stringify(e)),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token)})).then((function(){p(localStorage.getItem("access_token")),N(localStorage.getItem("refresh_token"))})).then((function(){return window.location=window.location.origin+"/earthify"})).then((function(){return window.localStorage.setItem("auth",!0)})).catch((function(e){return console.log("acees_token_respone: ",e)})),a.a.useEffect((function(){var e=[];setInterval((function(){localStorage.getItem("logged_in")&&(fetch("https://api.spotify.com/v1/me/player",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return 204===e.status?e:200===e.status?e.json():void 0})).then((function(e){e&&(e.error?401===e.error.status&&fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=refresh_token&refresh_token=".concat(localStorage.getItem("refresh_token"),"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){console.log("updating access token..."),localStorage.setItem("access_token",e.access_token)})).then((function(){return console.log("acess token were refresh\nnew access token: ",localStorage.getItem("access_token"))})).then((function(){return window.location.reload()})):e.item&&fetch("https://api.spotify.com/v1/me/tracks/contains?ids=".concat(e.item.id),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return 200==e.status?e.json():e})).then((function(e){ke(e[0])}))),ie(e),localStorage.setItem("current_position",e.progress_ms)})),fetch("https://api.spotify.com/v1/me/player/devices",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return 204===e.status?e:200===e.status?e.json():void(401===e.status&&fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=refresh_token&refresh_token=".concat(localStorage.getItem("refresh_token"),"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){console.log("updating access token..."),localStorage.setItem("access_token",e.access_token)})).then((function(){return console.log("acess token were refresh\nnew access token: ",localStorage.getItem("access_token"))})).then((function(){return window.location.reload()})))})).then((function(e){e&&e.devices.map((function(e){1==e.is_active&&de(e)}))})))}),1e3);var t=new Se.Map({container:"root",style:"mapbox://styles/mapbox/".concat(P,"-v10"),zoom:1.5});R(t),t.on("click",(function(n){if(window.location.search.match(/\?code/g)||y){function o(){console.log("access token is refreshing..."),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=refresh_token&refresh_token=".concat(C,"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){console.log("updating access token..."),localStorage.setItem("access_token",e.access_token)})).then((function(){return console.log("acess token were refresh\nnew access token: ",localStorage.getItem("access_token"))})).then((function(){return window.location.reload()}))}console.log("acces_token: ",l),fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n.lngLat.lng.toString(),",").concat(n.lngLat.lat.toString(),".json?&access_token=").concat(Se.accessToken),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){n.features.map((function(n){return"country"===n.place_type[0]&&(console.log("map_results: ",n),!1===t.getStyle().sources.hasOwnProperty(n.id)&&t.addSource(n.id,{type:"geojson",data:{type:n.type,geometry:n.geometry}}),t.getStyle().layers.map((function(t){e.push(t.id)})),-1===e.indexOf(n.text+"-layer")&&t.addLayer({id:n.text+"-layer",source:n.id,type:"circle"}),t.setPaintProperty(n.text+"-layer","circle-color","hsl(138, 100%, 40%)"),t.getStyle().layers.map((function(e){"circle"===e.type&&e.id!==n.text+"-layer"?t.setLayoutProperty(e.id,"visibility","none"):"circle"===e.type&&e.id==n.text+"-layer"&&t.setLayoutProperty(e.id,"visibility","visible")})),console.log("current_map_style: ",t.getStyle()),fetch("https://api.spotify.com/v1/search?q=".concat(encodeURIComponent("".concat(n.text," top 50")),"&type=playlist"),{method:"GET",headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){return e.json()})).then((function(e){e.error&&401===e.error.status&&o(),console.log("search_results: ",e);var t=[],a=[];if(e.playlists.items.map((function(e){("Top 50 Playlists"===e.owner.display_name||"spotifycharts"===e.owner.display_name||e.name.match(/top\ 50/gi))&&t.push(e)})),a=t.length>1?t[0]:t,Object.keys(a).length>0)O(t),localStorage.setItem("countrys_top_fifths",JSON.stringify(t)),console.log("top_fifth_playlists: ",a),fetch("https://api.spotify.com/v1/me/player/devices",{method:"GET",headers:{Authorization:"Bearer "+l}}).then((function(e){return e.json()})).then((function(e){e.error&&401===e.error.status&&o(),console.log("all_devices_result: ",e),0===e.devices.length&&alert("Please open Spotify App in your device");var t=[];e.devices.map((function(e){return!0===e.is_active&&t.push(e.id),t})),console.log("active_devices_array: ",t),t.length>0?(console.log("active device found!"),fetch("https://api.spotify.com/v1/me/player/play?",{method:"PUT",headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({context_uri:a.uri})}).then((function(e){return e.json()})).then((function(e){e.error&&401===e.error.status&&o(),console.log("player_result: ",e)})).catch((function(e){return console.log("player_err: ",e)}))):0===t.length&&(console.log("there is no active device. first found device is activating..."),fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({device_ids:[t[0]],play:!0})}).then((function(e){return e.json()})).then((function(e){e.error&&401===e.error.status?o():e.error&&404===e.error.status&&alert("Please open Spotify App in your device"),console.log("activate_device_result: ",e)})))})).catch((function(e){return console.log("device_err: ",e)}));else if(0===Object.keys(a).length){var c;console.log("there is no top 50 playlist for this country"),window.confirm("There isn't any Top 50 playlist for ".concat(n.text,".\nDo you wanna create one?"))&&(c=!!window.confirm("Do you wanna make it public?"),fetch("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:"Bearer "+l}}).then((function(e){return e.json()})).then((function(e){console.log("current_user_info: ",e),fetch("https://api.spotify.com/v1/users/".concat(e.id,"/playlists"),{method:"POST",headers:{Authorization:"Bearer "+l,"Content-Type":"application/json"},body:JSON.stringify({name:"".concat(n.text," Top 50"),public:c,description:"Created via Earthify"})}).then((function(e){return e.json()})).then((function(e){console.log("create_playlist_result: ",e),alert("Congratulaitons! You've just created a playlist named ".concat(n.text," Top 50!\nThe Spotify URI of your playtlist is ").concat(e.uri,"\nLet's add some tracks.\nMay the followers be with you! ;)"))}))})))}return a})).catch((function(e){return console.log("search_err: ",e)}))),n}))})).catch((function(e){console.log("map_err: ",e)}))}else window.location="https://accounts.spotify.com/authorize?client_id=".concat(j,"&response_type=code&redirect_uri=").concat(encodeURIComponent(B),"&scope=").concat(encodeURIComponent("user-library-read user-library-modify user-read-private user-read-email user-modify-playback-state user-read-playback-state playlist-modify-public playlist-modify-private"),"&show_dialog=true")}))}),[]);var Ee=function(e){fetch("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({context_uri:e.uri})}).then((function(e){return e})).then((function(e){console.log("pick_playlist_from_the_list: ",e),401===e.status?fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=refresh_token&refresh_token=".concat(C,"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){console.log("updating access token..."),localStorage.setItem("access_token",e.access_token)})).then((function(){return console.log("acess token were refresh\nnew access token: ",localStorage.getItem("access_token"))})).then((function(){return window.location.reload()})):404===e.status&&alert("Please open Spotify App in your device")}))},Ce=function(e){fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?&access_token=").concat(Se.accessToken),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("searched_country_result: ",e),D.setCenter(e.features[0].geometry.coordinates),D.setZoom(5)}))},ve=function(e){if(localStorage.setItem("listed_playlist",JSON.stringify(e)),console.log("listed_playlist: ",e),oe===e.id)ae(null);else{var t=a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{playlist_id:e.id}));ee(t),ae(e.id)}};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"settings",style:{textAlign:H?"end":"initial"}},a.a.createElement("div",{className:"settings-content",style:{display:H?"block":"none"}},a.a.createElement("div",{className:"modes"},a.a.createElement("div",{className:"search-form"},a.a.createElement("input",{name:"search-input",type:"text",className:"search-input",value:V||"",onKeyDown:function(e){"Enter"===e.key&&Ce(V)},onChange:function(e){e.preventDefault(),Y(e.target.value)}}),a.a.createElement("div",{className:"search-button"},a.a.createElement("input",{type:"image",src:u.a,alt:"search",className:"icon",onClick:function(){return Ce(V)}}))),a.a.createElement("div",null,a.a.createElement("button",{className:"map-style-button",onClick:function(){return function(){var e=D.getStyle();"Mapbox Light"===e.name?(D.setStyle("mapbox://styles/mapbox/dark-v10"),localStorage.setItem("map_style","dark"),F(localStorage.getItem("map_style"))):"Mapbox Dark"===e.name&&(D.setStyle("mapbox://styles/mapbox/light-v10"),localStorage.setItem("map_style","light"),F(localStorage.getItem("map_style")))}()}},"light"===P?"Dark Mode":"Light Mode"),a.a.createElement("button",{className:"toggle-player-button",onClick:function(){return pe(!ue),void localStorage.setItem("show_currently_playing",!ue)}},!0===ue?"Hide Controls":"Show Controls"))),a.a.createElement("div",{className:"lists"},a.a.createElement("ul",null,void 0!==I?I.map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{key:e.id,className:"playlist-list"},a.a.createElement("div",{className:"li-text",onClick:function(){return Ee(e)}},e.name),a.a.createElement("button",{className:"songs-button",onClick:function(){return ve(e)}},oe===e.id?"\u25bc":"\u25ba")),oe===e.id?$:null)})):localStorage.getItem("countrys_top_fifths")?JSON.parse(localStorage.getItem("countrys_top_fifths")).map((function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{key:e.id,className:"playlist-list"},a.a.createElement("div",{className:"li-text",onClick:function(){return Ee(e)}},e.name),a.a.createElement("button",{className:"songs-button",onClick:function(){return ve(e)}},oe===e.id?"\u25bc":"\u25ba")),oe===e.id?$:null)})):null))),a.a.createElement("button",{className:"toggle-settings",onClick:function(e){K(!H)}})),a.a.createElement("div",{id:"map",className:"App"}),!0===ue?a.a.createElement("div",{className:"now-playing"},a.a.createElement("img",{className:"now-playing-image",src:Object.keys(se).length>0&&se.item?se.item.album.images[se.item.album.images.length-1].url:A.a,alt:"album-image"}),a.a.createElement("img",{className:"now-playing-like",onClick:function(){Object.keys(se).length>0&&void 0!==se.item&&(1==we?fetch("https://api.spotify.com/v1/me/tracks?ids=".concat(se.item.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json"}}).then((function(e){return e})).then((function(e){return console.log("unlike_track_result: ",e)})):0==we&&fetch("https://api.spotify.com/v1/me/tracks?ids=".concat(se.item.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json"}}).then((function(e){return e})).then((function(e){return console.log("like_track_result: ",e)})))},src:1==we?h.a:m.a,alt:"is-liked"}),a.a.createElement("div",{className:"now-playing-info"},a.a.createElement("p",{className:"now-playing-track-name"},Object.keys(se).length>0&&null!==se.item?se.item.name:null),a.a.createElement("p",{className:"now-playing-artist-name"},Object.keys(se).length>0&&null!==se.item?se.item.artists.map((function(e){return _e.push(e.name),_e.join(", ")})):null)),a.a.createElement("div",{className:"now-playing-duration"},Object.keys(se).length>0&&null!==se.item?function(e){var t=parseInt(e/1e3%60),n=parseInt(e/6e4%60);return(n=n<10?"0"+n:n)+":"+(t=t<10?"0"+t:t)}(se.progress_ms):"0:00"),a.a.createElement("div",{className:"now-playing-progress"},a.a.createElement("input",{className:"now-playing-slider",style:{background:Object.keys(se).length>0&&null!==se.item?"linear-gradient(90deg, rgb(0,128,128) ".concat(se.progress_ms/se.item.duration_ms*100+"%",", rgb(255,255,255) ").concat(se.progress_ms/se.item.duration_ms*100+"%",")"):"white",width:"90%"},type:"range",min:"0",max:"100",step:"0.01",value:Object.keys(se).length>0&&null!==se.item?se.progress_ms/se.item.duration_ms*100:"0",onChange:function(e){return function(e){if(e.preventDefault(),Object.keys(se).length>0&&null!==se.item){var t=parseInt(e.target.value*se.item.duration_ms/100);localStorage.setItem("current_position",t),console.log(e.target.value),fetch("https://api.spotify.com/v1/me/player/seek?position_ms=".concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return e})).then((function(e){console.log("seek_position_result: ",e)}))}}(e)}})),a.a.createElement("div",{className:"now-playing-volume"},a.a.createElement("img",{className:"volume-icon",src:f.a}),a.a.createElement("input",{id:"volume",className:"now-playing-slider",style:{background:Object.keys(he).length>0&&null!==he.volume_percent?"linear-gradient(90deg, rgb(0,128,128) ".concat(he.volume_percent,"%, rgb(255,255,255) ").concat(he.volume_percent,"%)"):"white",width:"70%"},type:"range",min:"0",max:"100",value:he.volume_percent||"0",onChange:function(e){return function(e){e.preventDefault(),console.log("volume_value: ",e.target.value),fetch("https://api.spotify.com/v1/me/player/volume?volume_percent=".concat(e.target.value),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return 204===e.status?e:e.json()})).then((function(e){console.log("volume_result: ",e)}))}(e)}})),a.a.createElement("div",{className:"now-playing-turn"},a.a.createElement("button",{className:"now-playing-turn-prev",onClick:function(){fetch("https://api.spotify.com/v1/me/player/previous",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return e})).then((function(e){return console.log("play_previous_result",e)}))}},a.a.createElement("img",{src:E.a,alt:"previous"})),a.a.createElement("button",{className:"now-playing-turn-play",onClick:function(){Object.keys(se).length>0&&(!0===se.is_playing?fetch("https://api.spotify.com/v1/me/player/pause",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return e})).then((function(e){return console.log("paused_result: ",e)})):!1===se.is_playing&&fetch("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({context_uri:se.context.uri,offset:{uri:se.item.uri},position_ms:localStorage.getItem("current_position")||0})}).then((function(e){return e})).then((function(e){console.log("song_playing: ",e),404===e.status&&alert("Please open Spotify App in your device")})))}},1==se.is_playing?a.a.createElement("img",{src:_.a,alt:"pause"}):a.a.createElement("img",{src:w.a,alt:"play"})),a.a.createElement("button",{className:"now-playing-turn-forw",onClick:function(){fetch("https://api.spotify.com/v1/me/player/next",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then((function(e){return e})).then((function(e){return console.log("play_forward_result",e)}))}},a.a.createElement("img",{src:v.a,alt:"forward"})))):null)};function T(){return null!==window.location.search.match(/\?code/g)&&(localStorage.setItem("logged_in",!0),fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:"grant_type=authorization_code&code=".concat(window.location.search.split("=")[1],"&redirect_uri=").concat(B,"&client_id=").concat(j,"&client_secret=").concat(b)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("create_access_token_result",JSON.stringify(e)),localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token)})).then((function(){return window.location=window.location.origin+"/earthify"})).then((function(){return window.localStorage.setItem("auth",!0)})).catch((function(e){return console.log("acees_token_respone: ",e)}))),a.a.createElement("div",{className:"intro"},a.a.createElement("div",null,a.a.createElement("img",{src:A.a,alt:"earthify-icon",className:"intro-icon"})),a.a.createElement("div",null,a.a.createElement("button",{className:"intro-button",onClick:function(){window.location="https://accounts.spotify.com/authorize?client_id=".concat(j,"&response_type=code&redirect_uri=").concat(encodeURIComponent(B),"&scope=").concat(encodeURIComponent("user-library-read user-library-modify user-read-private user-read-email user-modify-playback-state user-read-playback-state playlist-modify-public playlist-modify-private"),"&show_dialog=true")}},"Login")))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,void 0==localStorage.getItem("logged_in")?a.a.createElement(T,null):a.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[18,1,2]]]);
//# sourceMappingURL=main.1f9f63a3.chunk.js.map