(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{11:function(e,t,o){},13:function(e,t,o){},15:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),c=o(4),i=o.n(c),r=(o(11),o(1)),s=o.n(r),l=o(5),p=o(2);o(13);var u=function(){var e=a.a.useState(localStorage.getItem("access_token")),t=Object(p.a)(e,2),n=t[0],c=(t[1],window.localStorage.getItem("auth")||!1),i=a.a.useState(c),r=Object(p.a)(i,2),u=r[0],d=(r[1],window.location.origin+window.location.pathname),h=o(14);if(h.accessToken="pk.eyJ1IjoiYXJkYW9ya2luIiwiYSI6ImNrOW9teW8wMzAyNnczbHJ0emVvNHE5dXcifQ.J_P9VwfH6UeYpgG5gw-JJQ",null!==window.location.hash.match(/access_token/g)){function f(){return(f=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.setItem("auth",!0);case 2:t=window.location.hash.substr(1),localStorage.setItem("access_token",t.split("=")[1].split("&")[0]),window.location=window.location.origin;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){f.apply(this,arguments)}()}return a.a.useEffect((function(){new h.Map({container:"root",style:"mapbox://styles/mapbox/dark-v10",zoom:3}).on("click",(function(e){window.location.hash||u?(console.log("acces_token: ",n),fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.lngLat.lng.toString(),",").concat(e.lngLat.lat.toString(),".json?&access_token=").concat(h.accessToken),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.features.map((function(e){"country"===e.place_type[0]&&(console.log("feature: ",e.text),"Turkey"===e.text&&fetch("https://api.spotify.com/v1/me/player/devices",{method:"GET",headers:{Authorization:"Bearer "+n}}).then((function(e){return e.json()})).then((function(e){console.log(e.devices[0].id),fetch("https://api.spotify.com/v1/me/player/play?device_id="+e.devices[0].id,{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({uris:["spotify:track:6Mer1LOfJDd7vUbeWXODrq"]})}).then((function(e){return e.json()})).then((function(e){return console.log("player_result: ",e)})).catch((function(e){return console.log("player_err: ",e)}))})).catch((function(e){return console.log("device_err: ",e)})))}))})).catch((function(e){console.log("map_err: ",e)}))):window.location="https://accounts.spotify.com/authorize?client_id=9e71a4da3ee24d31ab4fd842607cce9e&response_type=token&redirect_uri="+encodeURIComponent(d)+"&scope="+encodeURIComponent("user-modify-playback-state user-read-playback-state")+"&show_dialog=true"}))}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"map",className:"App"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(u,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,o){e.exports=o(15)}},[[6,1,2]]]);
//# sourceMappingURL=main.0952d3e9.chunk.js.map